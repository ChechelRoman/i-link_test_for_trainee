(()=>{"use strict";const e=(e,t,r)=>{let n=e;return"forward"===r?(n+=1,n>t-1?(n=0,n):n):"back"===r?(n-=1,n<0?(n=t-1,n):n):void 0},t=(e,t,r)=>{t.map((r=>(t.indexOf(r)===e.currentSlideIndex?r.style.display="block":r.style.display="none",r))),r.map((t=>(r.indexOf(t)===e.currentSlideIndex?t.style.background="#FFFFFF":t.style.background="none",t)))},r=(e,t,r)=>{if("opened"===e.state){const e=document.createElement("button");e.classList.add("custom__option","first-option"),e.textContent="Male";const n=document.createElement("button");n.classList.add("custom__option","second-option"),n.textContent="Female",r.classList.add("dropdown__arrow-up"),t.append(e),t.append(n)}if("closed"===e.state){if(null===e.selectValue)return t.removeChild(t.lastChild),t.removeChild(t.lastChild),void r.classList.remove("dropdown__arrow-up");const n=t.querySelector(".custom-select__placeholder");n.classList.add("status__fulfilled"),n.textContent=e.selectValue,r.classList.remove("dropdown__arrow-up"),t.removeChild(t.lastChild),t.removeChild(t.lastChild)}},n=e=>{const[t,r]=e.split(".");return{name:t,type:r}},a=e=>e.split("").map((e=>e.toUpperCase())).join(""),l=e=>{let t;return t=e>1048576?`${(e/1048576).toFixed(1)} mb`:`${(e/1024).toFixed(1)} kb`,t},s=(e,t)=>{for(;t.firstChild;)t.removeChild(t.firstChild);e.files.map((e=>{const r=document.createElement("div");r.classList.add("preview__item"),t.append(r);const s=document.createElement("img");if(s.classList.add("delete__item-icon"),s.setAttribute("src","./images/delete-icon.svg"),s.setAttribute("alt","delete icon"),s.dataset.icon="delete-icon",r.append(s),"application/pdf"===e.type){const t=document.createElement("span");t.classList.add("file__name-pdf"),t.textContent=n(e.name).name;const s=document.createElement("span");s.classList.add("file__size-pdf"),s.textContent=`${a(n(e.name).type)} ${l(e.size)}`,r.append(t),r.append(s)}else{const t=document.createElement("img"),s=window.URL.createObjectURL(e);t.setAttribute("src",s),t.setAttribute("alt","loaded image"),t.classList.add("file__image");const o=document.createElement("span");o.classList.add("file__name-img"),o.textContent=n(e.name).name;const d=document.createElement("span");d.classList.add("file__size-img"),d.textContent=`${a(n(e.name).type)} ${l(e.size)}`,r.append(t),r.append(o),r.append(d)}}))},o=e=>/^[A-Z]{1}[a-z]+ [A-Z]{1}[a-z]+$/.test(e),d=e=>"Male"===e||"Female"===e,i=e=>/^[A-Z]{1}[a-z]+$/.test(e),c=e=>/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}$/.test(e),u=(e,t)=>{t.parentElement.children.length>2&&t.parentElement.removeChild(t.parentElement.lastChild),t.classList.add("registration-field__invalid");const r=document.createElement("span");r.classList.add("field__erorr-message"),r.textContent=e.form.errors[t.id],t.parentElement.append(r)},m=e=>{e.parentElement.children.length>2&&e.parentElement.removeChild(e.parentElement.lastChild),e.classList.remove("registration-field__invalid"),e.classList.add("status__fulfilled")},f=e=>!0===o(e.form.values.name)&&!0===d(e.form.values.gender)&&!0===i(e.form.values.country)&&!0===i(e.form.values.city)&&!0===c(e.form.values.dateOfBirth)&&e.form.values.documents.length>0,p=e=>!0===o(e.form.values.name)&&!0===d(e.form.values.gender),v=e=>!0===i(e.form.values.country)&&!0===i(e.form.values.city)&&!0===c(e.form.values.dateOfBirth),g=e=>{const t=document.querySelector(".registration__second-row"),r=document.querySelector(".registration__third-row "),n=document.querySelector(".button-primary"),a=document.querySelector(".form__wrapper");if("formStep2"===e.ui&&(t.style.visibility="visible"),"formStep3"===e.ui&&(r.style.visibility="visible"),!1===e.form.valid&&n.setAttribute("disabled",""),!0===e.form.valid&&n.removeAttribute("disabled"),"submitted"===e.form.status){n.setAttribute("disabled","");const e=document.createElement("img");e.setAttribute("src","./images/complete-icon.svg"),e.setAttribute("alt","Complete icon"),e.classList.add("complete-icon");const t=document.createElement("span");t.classList.add("complete-message"),t.textContent="Completed",a.append(e),a.append(t)}};(()=>{const r={currentSlideIndex:0},n=[...document.querySelectorAll(".slider-item")],a=[...document.querySelectorAll(".slider-button")],l=document.querySelector(".slide-next"),s=document.querySelector(".slide-prev");a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),r.currentSlideIndex=a.indexOf(e.target),t(r,n,a)}))})),l.addEventListener("click",(l=>{l.preventDefault(),r.currentSlideIndex=e(r.currentSlideIndex,n.length,"forward"),t(r,n,a)})),s.addEventListener("click",(l=>{l.preventDefault(),r.currentSlideIndex=e(r.currentSlideIndex,n.length,"back"),t(r,n,a)}))})(),(()=>{const e={form:{valid:!1,status:"filling",values:{name:"",gender:"",country:"",city:"",dateOfBirth:"",documents:[]},errors:{name:"Please enter your first and last name",gender:"Please choose your gender",country:"Please enter the country you live in",city:"Please enter the city you live in",dateOfBirth:"Please enter your date of birth (dd.mm.yyyy)"}},ui:"formStep1"};document.querySelector(".input-name").addEventListener("input",(t=>{t.preventDefault(),"submitted"!==e.form.status&&(o(t.target.value)?(e.form.values.name=t.target.value,m(t.target)):(e.form.values.name=t.target.value,u(e,t.target)),p(e)&&(e.ui="formStep2"),f(e)?e.form.valid=!0:e.form.valid=!1,g(e))}));let t=0;const r=document.querySelector(".form__select-gender");r.addEventListener("click",(n=>{n.preventDefault(),"submitted"!==e.form.status&&(d(n.target.innerText)?(e.form.values.gender=n.target.innerText,((e,t)=>{const r=document.querySelector(".custom-select__placeholder");r.classList.contains("custom-select__invalid")&&"Choose your gender"!==t.textContent&&(e.removeChild(e.firstChild),r.classList.remove("custom-select__invalid"))})(r,n.target)):(e.form.values.gender=n.target.innerText,((e,t,r)=>{r>0&&t.parentElement.removeChild(t.parentElement.firstChild),document.querySelector(".custom-select__placeholder").classList.add("custom-select__invalid");const n=document.createElement("span");n.classList.add("field__erorr-message"),n.textContent=e.form.errors.gender,t.parentElement.prepend(n)})(e,n.target,t),t+=1),p(e)&&(e.ui="formStep2"),f(e)?e.form.valid=!0:e.form.valid=!1,console.log(e.form.values),g(e))})),document.querySelector(".input-country").addEventListener("input",(t=>{t.preventDefault(),"submitted"!==e.form.status&&(i(t.target.value)?(e.form.values.country=t.target.value,m(t.target)):(e.form.values.country=t.target.value,u(e,t.target)),v(e)&&(e.ui="formStep3"),f(e)?e.form.valid=!0:e.form.valid=!1,g(e))})),document.querySelector(".input-city").addEventListener("input",(t=>{t.preventDefault(),"submitted"!==e.form.status&&(i(t.target.value)?(e.form.values.city=t.target.value,m(t.target)):(e.form.values.city=t.target.value,u(e,t.target)),v(e)&&(e.ui="formStep3"),f(e)?e.form.valid=!0:e.form.valid=!1,g(e))})),document.querySelector(".input-birthday").addEventListener("input",(t=>{t.preventDefault(),"submitted"!==e.form.status&&(c(t.target.value)?(e.form.values.dateOfBirth=t.target.value,m(t.target)):(e.form.values.dateOfBirth=t.target.value,u(e,t.target)),v(e)&&(e.ui="formStep3"),f(e)?e.form.valid=!0:e.form.valid=!1,g(e))})),document.querySelector("#file-input").addEventListener("change",(t=>{const r=t.target.files;"submitted"!==e.form.status&&(e.form.values.documents=[...e.form.values.documents,...r],f(e)?e.form.valid=!0:e.form.valid=!1,g(e))})),document.querySelector(".files__preview").addEventListener("click",(t=>{if("submitted"!==e.form.status&&"delete-icon"===t.target.dataset.icon){{const r=[...t.target.parentElement.parentElement.children].indexOf(t.target.parentElement);e.form.values.documents.splice(r,1)}f(e)?e.form.valid=!0:e.form.valid=!1,g(e)}})),document.querySelector(".registration-form").addEventListener("submit",(t=>{t.preventDefault(),e.form.values,e.form.status="submitted",g(e)}))})(),(()=>{const e={files:[]},t=document.querySelector(".files__preview");document.querySelector("#file-input").addEventListener("change",(r=>{const n=r.target.files;e.files=[...e.files,...n],s(e,t)})),t.addEventListener("click",(r=>{if("delete-icon"===r.target.dataset.icon){const n=[...r.target.parentElement.parentElement.children].indexOf(r.target.parentElement);e.files.splice(n,1),s(e,t)}}))})(),(()=>{const e={state:"closed",selectValue:null},t=document.querySelector(".form__select-gender");(e=>{const t=document.createElement("button");t.classList.add("custom__select","custom-select__placeholder"),t.textContent="Choose your gender",t.setAttribute("id","gender");const r=document.createElement("label");r.classList.add("field-label"),r.setAttribute("for","gender"),r.textContent="Your gender";const n=document.createElement("img");n.classList.add("custom__select","dropdown__arrow-down"),n.setAttribute("src","./images/dropdown-arrow.svg"),n.setAttribute("alt","dropdown arrow"),e.replaceChildren(r,n,t)})(t);const n=document.querySelector(".dropdown__arrow-down");[...document.querySelectorAll(".custom__select")].forEach((a=>{a.addEventListener("click",(a=>{a.preventDefault(),e.state="closed"===e.state?"opened":"closed",r(e,t,n),document.querySelectorAll(".custom__option").forEach((a=>{a.addEventListener("click",(a=>{a.preventDefault(),e.state="closed",e.selectValue=a.target.textContent,r(e,t,n)}))}))}))}))})()})();